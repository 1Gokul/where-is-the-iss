<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>ISS Positon Finder</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="css/index.css">
</head>

<body class="d-flex flex-column h-100 bg-dark  text-light">

    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark py-3">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">ISS Position Finder</a>
            </div>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <main class="flex-shrink-0">
        <div class="container">
            <h1 class="mt-5 pl-5">Where is the International Space Station right now?</h1>
            <p class="lead">
                As of <code id="time"></code> UTC, the ISS is currently at a latitude <code id="lat"></code> and
                longitude <code id="lng"></code>.
            </p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer mt-auto py-3">
        <div class="container text-center">
            <span class="text-muted">Info taken from the <i>Where The ISS At?</i> API</span>
            <span><a class="text-muted" href="https://1gokul.github.io/">Gokul Viswanath</a></span>
            <span><a class="text-muted" href="https://github.com/1Gokul/where-is-the-iss">GitHub repo</a></span>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>

    <!-- Get and update the current time as well as the position of the ISS -->
    <script>
        // Set the current time (in UTC)
        const current_time = (new Date()).toISOString().slice(11, 19).replace(/-/g, "/").replace("T", " ");
        document.getElementById('time').innerHTML = current_time;

        // Send a GET request for the ISS's position
        fetch('https://api.wheretheiss.at/v1/satellites/25544')
            .then((response) => {
                return response.json();
            })
            .then((response) => {
                var current_latitude = response.latitude;
                var current_longitude = response.longitude;


                document.getElementById('lat').innerHTML = current_latitude.toFixed(3);
                document.getElementById('lng').innerHTML = current_longitude.toFixed(3);

            });
    </script>

</body>

</html>